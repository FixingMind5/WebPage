<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/courses/add_course_style.css' %}">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
    <title>@{{ request.user.username }} | add course</title>
</head>
{% include "players/mainHeader.html" %}
{% block header %}
{% endblock %}
<body>
    {% for error in form.errors %}<p class="invalid-feedback">{{ error }}</p>{% endfor %}
    {% for error in form.title.errors %}<p class="invalid-feedback">{{ error }}</p>{% endfor %}
    {% for error in form.teacher.errors %}<p class="invalid-feedback">{{ error }}</p>{% endfor %}
    {% for error in form.category.errors %}<p class="invalid-feedback">{{ error }}</p>{% endfor %}
    {% for error in form.abreviation.errors %}<p class="invalid-feedback">{{ error }}</p>{% endfor %}
    {% for error in form.description.errors %}<p class="invalid-feedback">{{ error }}</p>{% endfor %}
    <button class="move-arrow right" onclick="goNextSlide()">></button>
    <button class="move-arrow left" onclick="goPreviousSlide()"><</button>
    <section class="breadcrumb-container">
        <div class="breadcrumb">
            <a href="{% url 'players:player' request.user.username %}">{{ request.user.username }}</a>
            <p> / </p>
            <p> Agregar curso </p>
        </div>
        <h1>Agregar curso</h1>
    </section>
    <div>
        <form method="POST" class="form-container" enctype="multipart/form-data" action="{% url 'courses:submit_basic_information' %}">
            {% csrf_token %}
            <h1>Información básica del curso</h1>
            <h3>Título</h3><input 
                class="{% if form.title.errors %}is-invalid{% else %}form-field{% endif %}" 
                type="text" 
                name="title"
                value="{% if form.errors %}{{  form.title.value  }}{% endif %}"
            >
            <h3>Abreviación</h3><input 
                class="{% if form.abreviation.errors %}is-invalid{% else %}form-field{% endif %}" 
                type="text" 
                name="abreviation"
                value="{% if form.errors %}{{  form.abreviation.value  }}{% endif %}"
            >
            <h3>Profesor</h3><input 
                class="{% if form.teacher.errors %}is-invalid{% else %}form-field{% endif %}" 
                type="email" 
                name="teacher"
                value="{% if form.errors %}{{  form.teacher.value  }}{% endif %}"
            >
            <h3>Categoría</h3><select 
                class="{% if form.category.errors %}is-invalid{% else %}form-field{% endif %} course-category" 
                name="category"
                value="{% if form.errors %}{{  form.category.value  }}{% endif %}"
            >
                <option value="programación">programación</option>
                <option value="matemáticas">matemáticas</option>
                <option value="diseño">diseño</option>
            </select>
            <input class="submit-form-button" type="submit" value="enviar">
        </form>

        <form method="POST" class="form-container hidden" action="{% url 'courses:submit_project_course' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <h1>Información del Proyecto</h1>
            <h3>Pertenece a </h3><input 
                type="text" 
                name="course"
                class="{% if form.course.errors %}is-invalid{% else %}form-field{% endif %}"
                value="{% if form.errors %}{{ form.course.value }}{% endif %}"
                placeholder="Abreviación del curso al que pertenece"
            >
            <h3>Título</h3><input 
                type="text" 
                name="title"
                class="{% if form.title.errors %}is-invalid{% else %}form-field{% endif %}"
                value="{% if form.errors %}{{ form.title.value }}{% endif %}"
            >
            <h3>Descripción</h3><input 
                type="textarea" 
                name="description"
                class="{% if form.description.errors %}is-invalid{% else %}form-field{% endif %}"
                value="{% if form.errors %}{{ form.description.value }}{% endif %}"
            >
            <div class="image-container" id="image-container">
                <h3>Imagen</h3><input class="project-photo" type="file" name="image" id="image"><label for="image" id='image-label'>
                    <img src="{% static 'images/upload.svg' %}" alt="">
                    <span>Subir Foto</span>
                </label>
                {% for error in form.image.errors %}
                    <p style="color: red; align-self: center;">{{ error }}</p>
                {% endfor %}
                <p class="hidden" id="ready">¡File Uploaded!</p>
            </div>
            <input class="submit-form-button" type="submit" value="enviar">
        </form>
        <form method="POST" class="form-container hidden">
            <h1>Módulos y clases</h1>
            <div class="lessons-container" id="lessons-container">
                <div class="option">
                    <p>Agregar</p><select class="option" id="option">
                        <option value="0">Clase</option>
                        <option value="1">Módulo</option>
                    </select>
                    <input class="button" type="button" onclick="addElement()" value="+">
                </div>
            </div>
        </form>
    </div>
    <section class="upload-course-help">
        <iframe src="https://www.youtube.com/embed/MDvazVyFn8A" frameborder="0" width="400" height="295" allowfullscreen>Tu navegador no soporta pantalla completa :(</iframe>
        <h3>¿Cómo subir un curso?</h3>
        <p>En este video te mostramos cómo subir un curso. Cualquier inconveniente repórtalo con los líderes.</p>
    </section>
</body>
<script src="{% static 'scripts/add_course_logic.js' %}"></script>
<script src="{% static 'scripts/course-slide-show.js' %}"></script>
{% if form.errors %}
<script>
    var errorContainers = document.getElementsByClassName("invalid-feedback");

    for (let i = 0 ; i < errorContainers.length ; i++ ){
        setTimeout(() => {
            errorContainers[i].classList.add('hide')
        }, 10000);
    }
</script>
{% endif %}
</html>